query Titres(
  $typeIds: [TypeId!]
  $domaineIds: [DomaineId!]
  $statutIds: [StatutId!]
  $substances: [String!]
  $noms: [String!]
) {
  titres(
    typeIds: $typeIds
    domaineIds: $domaineIds
    statutIds: $statutIds
    substances: $substances
    noms: $noms
  ) {
    ...titre
  }
}

fragment titre on Titre {
  id
  nom
  type {
    id
    nom
  }
  domaine {
    id
    nom
  }
  statut {
    id
    nom
  }
  references {
    type
    valeur
  }
  volume
  surface
  volumeUnite {
    nom
  }
  substances {
    ...substance
  }
  administrations {
    ...administration
  }
  titulaires {
    ...entreprise
  }
  amodiataires {
    ...entreprise
  }
  geojsonPoints {
    ...geojsonPoints
  }
  geojsonMultiPolygon {
    ...geojsonMultiPolygon
  }
  demarches {
    ...demarche
  }
}

fragment demarche on Demarche {
  id
  ordre
  type {
    id
    nom
  }
  statut {
    id
    nom
  }
  phase {
    dateDebut
    dateFin
    statut {
      id
      nom
    }
  }
  etapes {
    ...etape
  }
}

fragment etape on Etape {
  ordre
  date
  type {
    id
    nom
  }
  statut {
    id
    nom
  }
}

fragment administration on Administration {
  nom
}

fragment entreprise on Entreprise {
  etablissements {
    nom
  }
  legalSiren
  legalEtranger
}

fragment geojsonMultiPolygon on GeojsonMultiPolygon {
  type
  geometry {
    type
    coordinates
  }
}

fragment geojsonPoints on GeojsonPoints {
  type
  features {
    type
    geometry {
      type
      coordinates
    }
  }
}

fragment substance on TitreSubstance {
  nom
  connexe
  gerep
  description
  legales {
    nom
  }
}
